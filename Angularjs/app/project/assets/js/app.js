function CompaniesController(e,t,n,a,o,r,i){function c(e){console.log(e.status),console.log(e.statusText)}function s(e,t){e.currentItem=l.currentItem,e.newProduct=function(){e.currentItem.companyGoods.push("")},e.chackUnique=function(){for(var t=0;t<l.companiesItems.length;t++){if(l.companiesItems[t].companyName===e.currentItem.companyName&&l.companiesItems[t].companyName!==l.currentCompanyName){e.editorForm.nameCompany.$setValidity("notOriginal",!1);break}e.editorForm.nameCompany.$setValidity("notOriginal",!0)}},e.deleteProduct=function(t){e.currentItem.companyGoods.splice(t,1)},e.hide=function(){t.hide()},e.save=function(){l.saveEdit(l.currentItem,l.currentCompanyName),t.hide()},e.getError=function(e){if(angular.isDefined(e)){if(e.required)return"Required";if(e.notOriginal)return"The company name must be unique"}}}s.$inject=["$scope","$mdDialog"];var l=this;l.companiesView="app/companies/companies.html",l.dialogView="app/companies/dialog.html",l.refresh=function(){function o(t){l.companiesItems=t.data.success,l.filtratedCompaniesItems=angular.copy(l.companiesItems),e.changeQuantityPages(),i(function(){a.hide()},1200)}var r=t.get(n);r.then(o,c)},l.create=function(a){function o(t){l.filtratedCompaniesItems.push(t.data.success),l.companiesItems.push(t.data.success),e.filtrCompanies()}var r=t.post(n,a);r.then(o,c)},l.update=function(e,a){function o(e){function t(e){for(var t=0;t<e.length;t++)if(e[t].companyName===a){e[t]=n;break}}var n=e.data.success;t(l.filtratedCompaniesItems),t(l.companiesItems)}var r=t({url:n+a,method:"PUT",data:e});r.then(o,c)},l.delete=function(a){function o(){l.companiesItems.splice(l.companiesItems.findIndex(function(e){return e.companyName===a.companyName}),1),l.filtratedCompaniesItems.splice(l.filtratedCompaniesItems.indexOf(a),1),e.changeQuantityPages()}var r=t({url:n+a.companyName,method:"DELETE"});r.then(o,c)},l.editOrCreate=function(e){l.currentItem=e?angular.copy(e):{}},l.saveEdit=function(e,t){"udate"===l.flagUpdateOrCreate?l.update(e,t):l.create(e)},l.refresh(),l.defaultQuantityElemsForOnePage=5,l.defaultCurrentPage=1,l.quantityElemsForOnePage=l.defaultQuantityElemsForOnePage,e.pages={current:l.defaultCurrentPage,quantity:""},e.changeQuantityPages=function(){e.pages.quantity=Math.ceil(l.filtratedCompaniesItems.length/l.quantityElemsForOnePage),e.pages.current=l.defaultCurrentPage,isFinite(e.pages.quantity)||(e.pages.quantity=Math.ceil(l.filtratedCompaniesItems.length/l.defaultQuantityElemsForOnePage))},e.deleteDialog=function(e,t){var n=a.confirm().title("Are you sure to delete?").textContent("Restoration of data can not be.").targetEvent(e).ok("Delete").cancel("Cancel");a.show(n).then(function(){l.delete(t)},function(){console.log("not delete")})},e.editOrCreateDialog=function(e,t,n){a.show({controller:s,templateUrl:"dialog1.tmpl.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}),l.flagUpdateOrCreate=n,l.editOrCreate(t),l.currentCompanyName=l.currentItem.companyName,l.currentItem.companyGoods||(l.currentItem.companyGoods=[],l.currentItem.companyGoods.push(""))},e.search={companyName:"",companyGoods:""},e.filtrCompanies=function(){l.companiesItemsJSON=JSON.stringify(l.companiesItems),e.expr=l.companiesItemsJSON+'| filter:{companyName: "'+e.search.companyName+'", companyGoods: "'+e.search.companyGoods+'"}';var t=o(e.expr);l.filtratedCompaniesItems=t(),e.changeQuantityPages()},e.progressDialog=function(e){a.show({templateUrl:"app/progress/progress.html",clickOutsideToClose:!0})},e.progressDialog()}function PaginationController(e){function t(){e.pages.current=n.paging.current}var n=this;n.paginationView="app/components/pagination.html",n.paging={total:e.pages.quantity,current:1,onPageChanged:t},e.$watch("pages.quantity",function(e,t){n.paging.total=e}),e.$watch("pages.current",function(e){n.paging.current=e})}function FiltersController(e,t){var n=this;n.filtersView="app/filters/filters.html"}CompaniesController.$inject=["$scope","$http","baseUrl","$mdDialog","$parse","cfpLoadingBar","$timeout"],PaginationController.$inject=["$scope"],FiltersController.$inject=["$scope","$parse"],angular.module("app",["ngMaterial","ngMessages","cl.paging","angular-loading-bar","ngAnimate"]),angular.module("app").constant("baseUrl","http://localhost:5050/companies/"),angular.module("app").controller("CompaniesController",CompaniesController),angular.module("app").controller("PaginationController",PaginationController),angular.module("app").controller("FiltersController",FiltersController),angular.module("app").config(["cfpLoadingBarProvider",function(e){e.includeSpinner=!1,e.includeBar=!0,e.parentSelector="#loading-bar-container",e.latencyThreshold=0}]);